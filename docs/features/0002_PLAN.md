# Feature Plan: Advanced Chat App

## Brief Description
Build an advanced chat app with a front page containing a connect button that navigates to a chat screen. The chat screen features a chat window for AI agent conversations and a camera button to activate the phone's back camera. No authentication or database required - chat functionality uses an AI agent that initiates conversations with a pleasantry.

## Files to Modify

### `/app/index.tsx`
- Replace existing button with "Connect" button
- Update button press handler to navigate to chat screen using expo-router
- Remove existing Alert functionality
- Keep existing Stack.Screen configuration but update title

### `/app/_layout.tsx`
- No changes required - existing Stack layout will handle navigation

## Files to Create

### `/app/chat.tsx`
- New screen component for chat functionality
- Implement chat UI with message list and input area
- Add camera button at bottom of screen
- Handle navigation from connect button
- Integrate AI agent chat functionality
- Display initial pleasantry message from AI agent

### `/src/components/ChatMessage.tsx`
- Component to render individual chat messages
- Support for user and AI agent message types
- Proper styling with TailwindCSS

### `/src/components/ChatInput.tsx`
- Text input component for user messages
- Send button functionality
- Handle message submission

### `/src/components/CameraButton.tsx`
- Camera activation button component
- Handle camera permissions and activation
- Position at bottom of chat screen

### `/src/hooks/useChat.tsx`
- Custom hook to manage chat state
- Handle message sending/receiving
- Manage AI agent responses
- Initialize chat with pleasantry message

### `/src/services/aiAgent.ts`
- Service to handle AI agent communication
- Generate initial pleasantry message
- Process user messages and generate responses
- Mock AI responses for demonstration

### `/src/hooks/useCamera.tsx`
- Custom hook to manage camera functionality
- Handle camera permissions
- Activate back camera when button pressed

## Required Dependencies
Add to package.json dependencies:
- `expo-camera`: For camera functionality and permissions
- `expo-permissions`: For handling camera permissions (if not included in expo-camera)

## Technical Implementation Details

### Navigation Flow
1. User starts on home screen (`/app/index.tsx`)
2. Connect button uses `router.push('/chat')` to navigate to chat screen
3. Chat screen (`/app/chat.tsx`) handles all chat and camera functionality

### Chat Algorithm
1. Initialize chat state with empty messages array
2. On component mount, add initial AI pleasantry message to chat
3. User types message and presses send
4. Add user message to chat state
5. Call AI agent service to generate response
6. Add AI response to chat state
7. Repeat for ongoing conversation

### Camera Integration
1. Request camera permissions on component mount
2. Camera button triggers camera activation
3. Use expo-camera to access back camera
4. Handle camera view overlay or navigation to camera screen

### AI Agent Implementation
- Create mock AI service that generates contextual responses
- Initial pleasantry examples: "Hello! How can I help you today?", "Hi there! What would you like to chat about?"
- Simple response generation based on user input patterns
- No external API required - all responses generated locally

### State Management
- Use React hooks (useState, useEffect) for local component state
- Custom hooks for chat and camera functionality
- No global state management required for this feature

### UI Layout Structure
```
Chat Screen:
├── Header (navigation back button)
├── Messages Container (scrollable)
│   ├── AI Message Components
│   └── User Message Components
├── Text Input Area
│   ├── Text Input Field
│   └── Send Button
└── Camera Button (fixed at bottom)
```

### Message Data Structure
```typescript
interface Message {
  id: string;
  text: string;
  sender: 'user' | 'ai';
  timestamp: Date;
}
```

### Styling Approach
- Use existing TailwindCSS configuration
- Consistent with current app styling
- Responsive design for different screen sizes
- Proper spacing and typography for chat interface
